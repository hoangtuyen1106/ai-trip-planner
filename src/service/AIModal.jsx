import { GoogleGenerativeAI } from "@google/generative-ai";

const apiKey = import.meta.env.VITE_GOOGLE_GEMINI_AI_API_KEY;
const genAI = new GoogleGenerativeAI(apiKey);

const model = genAI.getGenerativeModel({
  model: "gemini-2.0-pro-exp-02-05",
  systemInstruction: "key itinerary is an array containing JSON objects",
});

const generationConfig = {
    temperature: 1,
    topP: 0.95,
    topK: 64,
    maxOutputTokens: 8192,
    responseMimeType: "application/json",
};

export const chatSession = model.startChat({
    generationConfig,
    history: [
      {
        role: "user",
        parts: [
          {text: "Generate Travel Plan for Location: Las Vegas, for 3 Days for Couple with a Cheap bubget, Give me a Hotels options list with HotelName, Hotel addess, Price, hotel image url, geo coordinates, rating, descriptions and suggest itinerary with placeName, Place Details, Place Image Url, Geo Coordinates, Place address, ticket Pricing, rating, Time travel each of the location for 3 days with each day plan with best time to visit and give travel tips in JSON format"},
        ],
      },
      {
        role: "model",
        parts: [
          {text: "```json\n{\n  \"tripDetails\": {\n    \"location\": \"Las Vegas, Nevada\",\n    \"duration\": \"3 Days\",\n    \"travelers\": \"Couple\",\n    \"budget\": \"Cheap\"\n  },\n  \"hotels\": [\n    {\n      \"hotelName\": \"Circus Circus Hotel & Casino\",\n      \"hotelAddress\": \"2880 S Las Vegas Blvd, Las Vegas, NV 89109\",\n      \"price\": {\n        \"range\": \"$$$ (Budget-friendly)\",\n        \"currency\": \"USD\"\n      },\n      \"hotelImageUrl\": \"https://example.com/circuscircus.jpg\", \n      \"geoCoordinates\": {\n        \"latitude\": 36.1269,\n        \"longitude\": -115.172\n      },\n      \"rating\": 3.5,\n      \"description\": \"A classic Vegas hotel with a circus theme, offering affordable rooms and some on-site entertainment.\"\n    },\n    {\n      \"hotelName\": \"Luxor Hotel & Casino\",\n      \"hotelAddress\": \"3900 S Las Vegas Blvd, Las Vegas, NV 89119\",\n      \"price\": {\n        \"range\": \"$$$ (Budget-friendly)\",\n        \"currency\": \"USD\"\n      },\n      \"hotelImageUrl\": \"https://example.com/luxor.jpg\",\n      \"geoCoordinates\": {\n        \"latitude\": 36.091,\n        \"longitude\": -115.172\n      },\n      \"rating\": 3.8,\n      \"description\": \"A pyramid-shaped hotel with a slightly more upscale feel than Circus Circus, still offering budget-friendly options.\"\n\n    },\n    {\n      \"hotelName\": \"The D Las Vegas\",\n      \"hotelAddress\": \"300 Fremont Street, Las Vegas, NV 89101\",\n      \"price\": {\n        \"range\": \"$$ (Mid-range)\",\n        \"currency\": \"USD\"\n      },\n      \"hotelImageUrl\": \"https://example.com/theD.jpg\",\n      \"geoCoordinates\": {\n        \"latitude\": 36.1682,\n        \"longitude\": -115.140\n      },\n      \"rating\": 4.0,\n      \"description\": \"Downtown location, offering a more modern and stylish option but slightly higher in price\"\n    }\n  ],\n  \"itinerary\": [\n    {\n      \"day\": \"Day 1: Exploring the Strip (Budget-Friendly)\",\n      \"plan\": [\n        {\n          \"placeName\": \"Fremont Street Experience\",\n          \"placeDetails\": \"Free light show and street performers\",\n          \"placeImageUrl\": \"https://example.com/fremontstreet.jpg\",\n          \"geoCoordinates\": {\n            \"latitude\": 36.1682,\n            \"longitude\": -115.140\n          },\n          \"placeAddress\": \"Fremont Street, Las Vegas, NV\",\n          \"ticketPricing\": \"Free\",\n          \"rating\": 4.2,\n          \"time\": \"Evening (7:00 PM - 10:00 PM)\"\n        },\n        {\n          \"placeName\": \"Bellagio Fountains\",\n          \"placeDetails\": \"Free water show\",\n          \"placeImageUrl\": \"https://example.com/bellagiofountains.jpg\",\n          \"geoCoordinates\": {\n            \"latitude\": 36.1146,\n            \"longitude\": -115.1728\n          },\n          \"placeAddress\": \"3600 S Las Vegas Blvd, Las Vegas, NV 89109\",\n          \"ticketPricing\": \"Free\",\n          \"rating\": 4.5,\n          \"time\": \"Afternoon/Evening (3:00 PM - 5:00 PM)\"\n        }\n      ]\n    },\n    {\n      \"day\": \"Day 2: Downtown & Red Rock Canyon (Nature and Budget)\",\n      \"plan\": [\n        {\n          \"placeName\": \"Red Rock Canyon National Conservation Area\",\n          \"placeDetails\": \"Hiking, scenic drives (small entrance fee)\",\n          \"placeImageUrl\": \"https://example.com/redrockcanyon.jpg\",\n          \"geoCoordinates\": {\n            \"latitude\": 36.1691,\n            \"longitude\": -115.846\n          },\n          \"placeAddress\": \"1000 Scenic Loop Dr, Las Vegas, NV 89161\",\n          \"ticketPricing\": \"$15 per vehicle\",\n          \"rating\": 4.8,\n          \"time\": \"Morning/Afternoon (9:00 AM - 4:00 PM)\"\n        },\n         {\n          \"placeName\": \"Container Park\",\n          \"placeDetails\": \"Unique shopping and dining in repurposed shipping containers.\",\n          \"placeImageUrl\": \"https://example.com/containerpark.jpg\",\n          \"geoCoordinates\": {\n            \"latitude\": 36.1710,\n            \"longitude\": -115.1422\n          },\n          \"placeAddress\": \"707 E Fremont St, Las Vegas, NV 89101\",\n          \"ticketPricing\": \"Free entry\",\n          \"rating\": 4.0,\n          \"time\": \"Evening (6:00 PM - 9:00 PM)\"\n        }\n      ]\n    },\n    {\n      \"day\": \"Day 3: Pool Day & Value-Oriented Entertainment\",\n      \"plan\": [\n        {\n          \"placeName\": \"Hotel Pool (your chosen hotel)\",\n          \"placeDetails\": \"Relax and enjoy the hotel's pool facilities\",\n          \"placeImageUrl\": \"https://example.com/pool.jpg\", \n          \"geoCoordinates\": { \"latitude\": \"check your hotel\", \"longitude\": \"check your hotel\" },\n          \"placeAddress\": \"Check your hotel\",\n          \"ticketPricing\": \"Free (if staying at the hotel)\",\n          \"rating\": \"Check reviews\",\n          \"time\": \"Afternoon (12:00 PM - 5:00 PM)\"\n        },\n        {\n          \"placeName\": \"In-N-Out Burger\",\n          \"placeDetails\": \"Enjoy a cheap and delicious meal\",\n          \"placeImageUrl\": \"https://example.com/in-n-out.jpg\",\n          \"geoCoordinates\": { \"latitude\": \"various locations\", \"longitude\": \"various locations\" },\n          \"placeAddress\": \"Various locations\",\n          \"ticketPricing\": \"Low-cost\",\n          \"rating\": 4.4,\n          \"time\": \"Dinner (7:00 PM - 8:00 PM)\"\n        }\n      ]\n    }\n  ],\n  \"travelTips\": [\n    \"Walk as much as possible to save on transportation costs.\",\n    \"Take advantage of free activities like the Bellagio Fountains and Fremont Street Experience.\",\n    \"Look for happy hour deals and affordable restaurants.\",\n    \"Pack light to avoid baggage fees.\",\n    \"Bring comfortable shoes as you'll be doing a lot of walking.\",\n    \"Stay hydrated, especially during the hot summer months.\",\n    \"Utilize public transportation like the monorail where applicable.\"\n  ]\n}\n```\n\n**Note:**  Replace `\"https://example.com/...\"` with actual image URLs.  Hotel prices are estimates and can vary greatly depending on the season and availability.  The geo coordinates for some places are general locations; you should replace them with more precise coordinates when available.  Always check official websites for the most up-to-date pricing and information.\n"},
        ],
      },
      {
        role: "user",
        parts: [
          {text: "Generate Travel Plan for Location: Las Vegas, for 1 Days for Couple with a Cheap bubget, Give me a Hotels options list with HotelName, Hotel addess, Price, hotel image url, geo coordinates, rating, descriptions and suggest itinerary with placeName, Place Details, Place Image Url, Geo Coordinates, Place address, ticket Pricing, rating, Time travel each of the location for 1 days with each day plan with best time to visit and give travel tips in JSON format"},
        ],
      },
      {
        role: "model",
        parts: [
          {text: "```json\n{\n  \"tripDetails\": {\n    \"location\": \"Las Vegas, Nevada\",\n    \"duration\": \"1 Day\",\n    \"travelers\": \"Couple\",\n    \"budget\": \"Cheap\"\n  },\n  \"hotels\": [\n    {\n      \"hotelName\": \"Circus Circus Hotel & Casino\",\n      \"hotelAddress\": \"2880 S Las Vegas Blvd, Las Vegas, NV 89109\",\n      \"price\": {\n        \"range\": \"$$$ (Budget-friendly)\",\n        \"currency\": \"USD\"\n      },\n      \"hotelImageUrl\": \"https://example.com/circuscircus.jpg\", \n      \"geoCoordinates\": {\n        \"latitude\": 36.1269,\n        \"longitude\": -115.172\n      },\n      \"rating\": 3.5,\n      \"description\": \"A classic Vegas hotel with a circus theme, offering affordable rooms and some on-site entertainment.\"\n    },\n    {\n      \"hotelName\": \"Luxor Hotel & Casino\",\n      \"hotelAddress\": \"3900 S Las Vegas Blvd, Las Vegas, NV 89119\",\n      \"price\": {\n        \"range\": \"$$$ (Budget-friendly)\",\n        \"currency\": \"USD\"\n      },\n      \"hotelImageUrl\": \"https://example.com/luxor.jpg\",\n      \"geoCoordinates\": {\n        \"latitude\": 36.091,\n        \"longitude\": -115.172\n      },\n      \"rating\": 3.8,\n      \"description\": \"A pyramid-shaped hotel with a slightly more upscale feel than Circus Circus, still offering budget-friendly options.\"\n    }\n  ],\n  \"itinerary\": [\n    {\n      \"day\": \"Day 1:  Fremont Street & Strip Highlights\",\n      \"plan\": [\n        {\n          \"placeName\": \"Fremont Street Experience\",\n          \"placeDetails\": \"Free light show and street performers\",\n          \"placeImageUrl\": \"https://example.com/fremontstreet.jpg\",\n          \"geoCoordinates\": {\n            \"latitude\": 36.1682,\n            \"longitude\": -115.140\n          },\n          \"placeAddress\": \"Fremont Street, Las Vegas, NV\",\n          \"ticketPricing\": \"Free\",\n          \"rating\": 4.2,\n          \"time\": \"Afternoon (3:00 PM - 6:00 PM)\"\n        },\n        {\n          \"placeName\": \"Bellagio Fountains\",\n          \"placeDetails\": \"Free water show\",\n          \"placeImageUrl\": \"https://example.com/bellagiofountains.jpg\",\n          \"geoCoordinates\": {\n            \"latitude\": 36.1146,\n            \"longitude\": -115.1728\n          },\n          \"placeAddress\": \"3600 S Las Vegas Blvd, Las Vegas, NV 89109\",\n          \"ticketPricing\": \"Free\",\n          \"rating\": 4.5,\n          \"time\": \"Evening (7:00 PM - 8:00 PM)\"\n        },\n        {\n          \"placeName\": \"Walk the Strip (south end)\",\n          \"placeDetails\": \"See the iconic hotels and atmosphere\",\n          \"placeImageUrl\": \"https://example.com/lasvegasstrip.jpg\",\n          \"geoCoordinates\": {\n            \"latitude\": 36.11,\n            \"longitude\": -115.17\n          },\n          \"placeAddress\": \"Las Vegas Boulevard South\",\n          \"ticketPricing\": \"Free\",\n          \"rating\": 4.0,\n          \"time\": \"Evening (8:00 PM - 10:00 PM)\"\n        },\n        {\n          \"placeName\": \"In-N-Out Burger or similar budget-friendly option\",\n          \"placeDetails\": \"Grab a quick and inexpensive dinner\",\n          \"placeImageUrl\": \"https://example.com/in-n-out.jpg\",\n          \"geoCoordinates\": { \"latitude\": \"various locations\", \"longitude\": \"various locations\" },\n          \"placeAddress\": \"Various locations across Las Vegas\",\n          \"ticketPricing\": \"Low-cost\",\n          \"rating\": 4.4,\n          \"time\": \"Late Evening (10:30 PM)\"\n        }\n      ]\n    }\n  ],\n  \"travelTips\": [\n    \"Walk the Strip – it's the best way to see the sights and save on transportation.\",\n    \"Take advantage of free attractions like the Bellagio Fountains and the Fremont Street Experience.\",\n    \"Eat at affordable restaurants or grab fast food to save money.\",\n    \"Pack light to avoid baggage fees.\",\n    \"Bring comfortable shoes – you’ll be doing a lot of walking.\",\n    \"Stay hydrated, especially during warmer months.\",\n    \"Consider using ride-sharing services for longer distances if needed.\"\n  ]\n}\n```\n\nRemember to replace the placeholder image URLs with actual image URLs.  Hotel prices are estimates and can fluctuate.  Always check official sources for current information and pricing.\n"},
        ],
      },
    ],
});
